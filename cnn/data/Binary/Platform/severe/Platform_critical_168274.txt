compare causing stack overflow errors (and apparent hang).
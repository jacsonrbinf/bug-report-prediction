Possible deadlock when big chunk of data is written by the process